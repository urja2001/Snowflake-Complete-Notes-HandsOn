                                                   Access Control

• Access Control determines who can access database objects and perform operations on specific objects in Snowflake

• Snowflake uses a combination of Role-Based Access Control (RBAC) and Discretionary Access Control (DAC) to provide a flexible and granular access control.

 o	Discretionary Access Control (DAC) :  Each object has an owner, who can in turn grant access to that object.

 o	Role-based Access Control (RBAC) : Access privileges are assigned to roles, which are in turn assigned to users.

---------------------------------------------------------------------------------------------------------------

                                                    Key Concepts

•	Securable object :

 o	Securable objects are databases, schemas, tables, views, and functions in Snowflake.
 o	It is an entity that can be secured and to which access can be granted.
 o	Access to a securable object is, by default, denied unless allowed by a grant.


•	Role :

 o	Roles are the entities to which privileges on securable objects can be granted and revoked.
 o	The main purpose is to authorize users to carry out necessary actions within the organization.
 o	It is used to manage and control access to securable objects ( like databases, tables, schemas, tables, or views ) in Snowflake. 
 o	Roles are assigned to users, and a user can have multiple roles.

Note : Roles can also be assigned to other roles, creating a role hierarchy that enables more granular level control.


•	 Privilege :

 o	Privileges define specific actions that users or roles are allowed to perform on securable objects in Snowflake i.e It is a level of access that can be granted to a securable object. 
 o	Privileges are managed by using the GRANT and REVOKE commands. 
 o	Multiple distinct privileges can be used to control access to a securable object, such as the privileges of inserting , selecting , updating or deleting from a table.

Note : 
      o	In non-managed schemas, these GRANT and REVOKE commands can only be used by the role that owns an object or any Snowflake roles with the MANAGE GRANTS privilege for that particular object. 
      o	In managed schemas, only the schema owner or a role with the MANAGE GRANTS privilege can grant privileges on objects in the schema, including future grants, which centralizes privilege management.


•	 User :

 o	It is an entity to which you can define privileges.
 o	Users are granted privileges through roles assigned to them.
 o	Users can be assigned to one or more roles, granting them access to securable objects in Snowflake.

---------------------------------------------------------------------------------------------------------------

                                                    2 Types of Roles

1. System-Defined Roles  2. Custom Roles 


1. System-Defined Roles

 o System-defined roles in Snowflake are predefined roles that are automatically created when a Snowflake account is provisioned. 
 o These kinds of roles are designed to provide built-in access controls and permissions for Snowflake objects and resources.

• ORGADMIN (Organization Administrator):

 o This role manages the operations at the organization level.
 o It has the ability to create accounts at the organization level.
 o It can view all accounts in the organization using SHOW ORGANIZTION ACCOUNTS as well as all regions are enabled for the organization using SHOW REGIONS
 o It can also view usage information across the organization.

Note : GLOBALORGADMIN exists only in the organization account.


• ACCOUNTADMIN (Account Administrator) :

 o It is the top-level role in the Snowflake.
 o Ony Account Admin can see all account related things like usaege , billing , usrs , roles , sessions and reader account details.
 o It should only be granted to a limited/controlled number of users in the account.
 o Can enable Multi Factor Authentication.
 o This role combines the power of SYSADMIN and SECURITYADMIN roles.


• SECURITYADMIN (Security Administrator) :

 o This role can manage any object grant globally.
 o It has the ability to create, monitor and manage users and roles.
 o It is granted the MANAGE GRANTS security privilege to be able to modify any grant, including revoking it i.e. Limites access to Account tab. 
 o It inherits the privileges of the USERADMIN role via the system role i.e. SYSADMIN hierarchy.


• USERADMIN (User and Role Administrator) :

 o This particular role is dedicated to user and role management only.
 o It is granted the CREATE USER and CREATE ROLE security privileges.
 o It can create users and roles in the account i.e. It can manage users and roles that it owns.


• SYSADMIN (System Administrator) :

 o This role has privileges to create warehouses, databases, and various other objects in the account.
 o It also has the ability to grant privileges on warehouses, databases, and other objects to other roles.
 o All custom roles are assigned to  SYSADMIN role.


• PUBLIC :

 o By Default PUBLIC role is automatically granted to every user and every role in the account.
 o The objects owned by the role, by definition is available to every other user and role in the account.
 o It is typically used when all users have all access rightwhen explicit access to the objects i.e. It is typically used when explicit access control is not needed.

-------------------------------------------------------------------------------

2. Custom Roles

 o Custom role in Snowflake is a role that is created by users with appropriate privileges to grant the role and user ownership on specific securable objects. 
 o Custom roles can be created using the USERADMIN role or higher, as well as by any role that has been granted the CREATE ROLE privilege.

Note: Whenever a custom role is created, it is not assigned to any user or granted to any other role

 o  It is recommended to create a hierarchy of custom roles with the top-most custom role assigned to the system role SYSADMIN when creating roles that will serve as the owners of securable objects, which allows  o SYSADMIN to manage all objects in the account while restricting management of users and roles to the USERADMIN role. 
If a custom role is not assigned to SYSADMIN through a role hierarchy, then the SYSADMIN role cannot manage the objects owned by that role.

---------------------------------------------------------------------------------------------------------------
